<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">
    <Script file="TalentsAndSpellbook.lua"/>

    <Button name="ACClasslessClassButtonTemplate" virtual="true">
        <Size x="64" y="80"/> <!-- Total size including space for label -->

        <PushedTexture file="Interface\Buttons\UI-Quickslot-Depress">
            <Size x="56" y="56"/>
            <Anchors>
                <Anchor point="TOP" x="0" y="0"/>
            </Anchors>
        </PushedTexture>

        <!-- FIXED: Anchored only to the icon area -->
        <HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD">
            <Size x="56" y="56"/>
            <Anchors>
                <Anchor point="TOP" x="0" y="0"/>
            </Anchors>
        </HighlightTexture>

        <Layers>
            <!-- Icon Layer -->
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon" parentKey="Icon">
                    <Size x="56" y="56"/>
                    <Anchors>
                        <Anchor point="TOP" x="0" y="0"/>
                    </Anchors>
                </Texture>
            </Layer>

            <Layer level="ARTWORK">
                <Texture name="$parentSelectedTexture" parentKey="SelectedTexture" file="Interface\Buttons\ButtonHilight-Square" hidden="true" alphaMode="ADD">
                    <Size x="56" y="56"/>
                    <Anchors><Anchor point="TOP" x="0" y="0"/></Anchors>
                </Texture>
            </Layer>

            <!-- Text Label Layer -->
            <Layer level="OVERLAY">
                <FontString name="$parentLabel" parentKey="Label" inherits="GameFontNormalSmall">
                    <Size x="96" y="20"/>
                    <Anchors>
                        <!-- Anchor to the Icon defined above -->
                        <Anchor point="TOP" relativeTo="$parentIcon" relativePoint="BOTTOM" x="0" y="-2"/>
                    </Anchors>
                    <JustifyH value="CENTER"/>
                    <Text>Class</Text>
                </FontString>
            </Layer>
        </Layers>

        <Scripts>
            <OnClick>
                ACClasslessClassButton_OnClick(self, button);
            </OnClick>
        </Scripts>
    </Button>

    <Button name="ACClasslessTreeButtonTemplate" virtual="true">
        <Size x="128" y="32"/>

        <NormalFont style="GameFontNormal"/>
        <HighlightFont style="GameFontHighlight"/>
        <DisabledFont style="GameFontDisable"/>
        <NormalTexture inherits="UIPanelButtonUpTexture"/>
        <PushedTexture inherits="UIPanelButtonDownTexture"/>
        <HighlightTexture inherits="UIPanelButtonHighlightTexture"/>
        <Layers>
            <!-- Icon Layer -->
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon" parentKey="Icon">
                    <Size x="56" y="56"/>
                    <Anchors>
                        <Anchor point="TOP" x="0" y="0"/>
                    </Anchors>
                </Texture>
            </Layer>

            <!-- Text Label Layer -->
            <Layer level="ARTWORK">
                <Texture name="$parentSelectedTexture" parentKey="SelectedTexture" inherits="UIPanelButtonHighlightTexture" hidden="true" alphaMode="ADD">
                    <Size x="128" y="32"/>
                    <Anchors><Anchor point="CENTER"/></Anchors>
                </Texture>
            </Layer>

            <Layer level="OVERLAY">
                <FontString name="$parentLabel" parentKey="Label" inherits="GameFontNormalSmall">
                    <Size x="128" y="32"/>
                    <Anchors>
                        <!-- Anchor to the Icon defined above -->
                        <Anchor point="TOPLEFT" x="0" y="-2"/>
                    </Anchors>
                    <JustifyH value="CENTER"/>
                    <Text>Class</Text>
                </FontString>
            </Layer>

        </Layers>

    </Button>

    <Button name="ClasslessTalentButtonTemplate" inherits="ACClasslessTreeButtonTemplate" virtual="true">
        <Size x="16" y="16"/>
    </Button>


    <!-- =================================== -->
    <!--  Spell button template (simple)     -->
    <!-- =================================== -->
    <Button name="ACClasslessSpellButtonTemplate" virtual="true">
        <Size x="40" y="40"/>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon" parentKey="Icon">
                    <Anchors>
                        <Anchor point="TOPLEFT" x="2" y="-2"/>
                        <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
                    </Anchors>
                    <TexCoords left="0.08" right="0.92" top="0.08" bottom="0.92"/>
                </Texture>
            </Layer>
            <Layer level="BORDER">
                <Texture name="$parentBorder">
                    <Anchors>
                        <Anchor point="TOPLEFT" x="-8" y="8"/>
                        <Anchor point="BOTTOMRIGHT" x="8" y="-8"/>
                    </Anchors>
                    <Texture file="Interface\Buttons\UI-Quickslot2"/>
                </Texture>
            </Layer>
        </Layers>
        <NormalTexture file="Interface\Buttons\UI-Quickslot2"/>
        <PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
        <HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>
        <Scripts>
            <OnEnter>
                ACClasslessSpellButton_OnEnter(self);
            </OnEnter>
            <OnLeave>
                GameTooltip:Hide();
            </OnLeave>
            <OnClick>
                ACClasslessSpellButton_OnClick(self, button);
            </OnClick>
        </Scripts>
    </Button>

    <Frame name="ACClasslessUIFrame" parent="UIParent" toplevel="true" movable="true" enableMouse="true" hidden="true">
        <Size x="1000" y="700"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background"
                  edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
        </Backdrop>

        <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
            <Anchors>
                <Anchor point="TOPRIGHT" x="-6" y="-6"/>
            </Anchors>
        </Button>
        <Scripts>
            <OnLoad>
                self:RegisterForDrag("LeftButton");
            </OnLoad>
            <OnDragStart>
                self:StartMoving();
            </OnDragStart>
            <OnDragStop>
                self:StopMovingOrSizing();
            </OnDragStop>
            <OnShow>
                ACClasslessUIFrame_OnShow(self);
            </OnShow>
        </Scripts>

        <Frames>
            <Frame name="ClasslessClassSelectorFrame" parentKey="ClassSelectorFrame">
                <size x="1000" y="100"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="0" y="0"/>
                </Anchors>

                <Scripts>
                    <OnLoad>
                        self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10);
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Button name="ClasslessDeathKnightButton" parentKey="DeathKnightButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="45"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Spell_Deathknight_ClassIcon");
                                self.Label:SetText("Death Knight"); self:SetID(1);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessDruidButton" parentKey="DruidButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="139"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Ability_Druid_Maul");
                                self.Label:SetText("Druid"); self:SetID(2);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessHunterButton" parentKey="HunterButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="233"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Inv_weapon_bow_07");
                                self.Label:SetText("Hunter"); self:SetID(3);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessMageButton" parentKey="MageButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="327"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Inv_staff_13");
                                self.Label:SetText("Mage"); self:SetID(4);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessPaladinButton" parentKey="PaladinButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="421"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Spell_Holy_DevotionAura");
                                self.Label:SetText("Paladin"); self:SetID(5);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessPriestButton" parentKey="PriestButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="515"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Inv_staff_30");
                                self.Label:SetText("Priest"); self:SetID(6);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessRogueButton" parentKey="RogueButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="609"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Inv_throwingknife_04");
                                self.Label:SetText("Rogue"); self:SetID(7);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessShamanButton" parentKey="ShamanButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="703"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Spell_Nature_BloodLust");
                                self.Label:SetText("Shaman"); self:SetID(8);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessWarlockButton" parentKey="WarlockButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="797"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Spell_Nature_FaerieFire");
                                self.Label:SetText("Warlock"); self:SetID(9);
                            </OnLoad>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessWarriorButton" parentKey="WarriorButton"
                            inherits="ACClasslessClassButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-32" x="891"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                self.Icon:SetTexture("Interface\\Icons\\Inv_sword_27");
                                self.Label:SetText("Warrior"); self:SetID(10);
                            </OnLoad>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame>

            <Frame name="ClasslessTreeSelectorFrame" parentKey="TreeSelectorFrame">
                <Size x="1000" y="100"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="0" y="-100"/>
                </Anchors>
                <Frames>

                    <Button name="ClasslessTreeTab1" parentKey="TreeTab1" inherits="ACClasslessTreeButtonTemplate" text="Blood">
                        <Size x="120" y="40"/>
                        <Anchors>
                            <Anchor point="TOPLEFT" x="20" y="-10"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>self:SetID(1);</OnLoad>
                            <OnClick>ACClasslessTreeButton_OnClick(self);</OnClick>
                        </Scripts>
                    </Button>


                    <Button name="ClasslessTreeTab2" parentKey="TreeTab2" inherits="ACClasslessTreeButtonTemplate" text="Frost">
                        <Size x="120" y="40"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="ClasslessTreeTab1" relativePoint="RIGHT" x="10"
                                    y="0"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>self:SetID(2);</OnLoad>
                            <OnClick>ACClasslessTreeButton_OnClick(self);</OnClick>
                        </Scripts>
                    </Button>


                    <Button name="ClasslessTreeTab3" parentKey="TreeTab3" inherits="ACClasslessTreeButtonTemplate" text="Unholy">
                        <Size x="120" y="40"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="ClasslessTreeTab2" relativePoint="RIGHT" x="10"
                                    y="0"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>self:SetID(3);</OnLoad>
                            <OnClick>ACClasslessTreeButton_OnClick(self);</OnClick>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessGlyphTab" parentKey="GlyphTab" inherits="ACClasslessTreeButtonTemplate" text="Glyph">
                        <Size x="120" y="40"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="ClasslessTreeTab3" relativePoint="RIGHT" x="10"
                                    y="0"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>self:SetID(4);</OnLoad>
                            <OnClick>ACClassless_SelectGlyph(self);</OnClick>
                        </Scripts>
                    </Button>

                    <Button name="ClasslessPetTab" parentKey="PetTab" inherits="ACClasslessTreeButtonTemplate" text="Pet">
                        <Size x="120" y="40"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="ClasslessGlyphTab" relativePoint="RIGHT" x="10"
                                    y="0"/>
                        </Anchors>
                        <Scripts>
                            <OnLoad>self:SetID(4);</OnLoad>
                            <OnClick>ACClassless_SelectGlyph(self);</OnClick>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame>

            <Frame name="ClasslessSpellbookFrame" parentKey="SpellbookFrame">
                <Size x="500" y="500"/>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" x="0" y="0"/>
                </Anchors>

                <Layers>
                    <Layer level="ARTWORK">
                        <FontString name="$parentTitleText" inherits="GameFontNormal" text="SPELLBOOK">
                            <Anchors>
                                <Anchor point="CENTER">
                                    <Offset>
                                        <AbsDimension x="6" y="230"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                        </FontString>
                        <FontString name="$parentPageText" inherits="GameFontNormal">
                            <Size>
                                <AbsDimension x="102" y="0"/>
                            </Size>
                            <Anchors>
                                <Anchor point="BOTTOM">
                                    <Offset>
                                        <AbsDimension x="-14" y="96"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>


                <Frames>
                    <!-- Paging controls -->
                    <Button name="$parentPrevPage" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="32" y="32"/>
                        </Size>
                        <Anchors>
                            <Anchor point="BOTTOMLEFT" x="18" y="12"/>
                        </Anchors>
                        <Text>Prev</Text>
                        <Scripts>
                            <OnClick>
                                ACClasslessSpellbook_PrevPage(self);
                            </OnClick>
                        </Scripts>
                        <NormalTexture file="Interface\Buttons\UI-SpellbookIcon-PrevPage-Up"/>
                        <PushedTexture file="Interface\Buttons\UI-SpellbookIcon-PrevPage-Down"/>
                        <DisabledTexture file="Interface\Buttons\UI-SpellbookIcon-PrevPage-Disabled"/>
                        <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                    </Button>

                    <Button name="$parentNextPage" inherits="UIPanelButtonTemplate">
                        <Size>
                            <AbsDimension x="32" y="32"/>
                        </Size>
                        <Anchors>
                            <Anchor point="BOTTOMRIGHT" y="12" x="-18"/>
                        </Anchors>
                        <Text>Next</Text>
                        <Scripts>
                            <OnClick>
                                ACClasslessSpellbook_NextPage(self);
                            </OnClick>
                        </Scripts>
                        <NormalTexture file="Interface\Buttons\UI-SpellbookIcon-NextPage-Up"/>
                        <PushedTexture file="Interface\Buttons\UI-SpellbookIcon-NextPage-Down"/>
                        <DisabledTexture file="Interface\Buttons\UI-SpellbookIcon-NextPage-Disabled"/>
                        <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>
                    </Button>


                    <!-- Spell grid anchor -->
                    <Frame name="$parentGrid">
                        <Anchors>
                            <Anchor point="TOPLEFT"/>
                        </Anchors>
                        <Size x="500" y="450"/>
                    </Frame>
                </Frames>

                <Scripts>
                </Scripts>
            </Frame>

            <Frame name="ClasslessTalentFrame" parentKey="TalentFrame">
                <Size x="500" y="500"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" x="0"
                            y="0"/>
                </Anchors>

                <Layers>
                    <Layer level="ARTWORK">
                        <FontString name="$parentTitleText" inherits="GameFontNormal" text="TALENTS">
                            <Anchors>
                                <Anchor point="CENTER">
                                    <Offset>
                                        <AbsDimension x="6" y="230"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                        </FontString>
                        <FontString name="$parentPageText" inherits="GameFontNormal">
                            <Size>
                                <AbsDimension x="102" y="0"/>
                            </Size>
                            <Anchors>
                                <Anchor point="BOTTOM">
                                    <Offset>
                                        <AbsDimension x="-14" y="96"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>

                <Frames>
                    <Frame name="$parentPointsContainer" parentKey="PointsContainer">
                        <Size x="500" y="20"/>
                        <Anchors>
                            <Anchor point="BOTTOM">
                                <Offset x="0" y="17"/>
                            </Anchor>
                        </Anchors>
                        <Layers>
                            <Layer level="ARTWORK">
                                <FontString name="$parentSpentPointsText" parentKey="SpentPointsText"
                                            inherits="GameFontNormal" text="Arcane Talents: 12" justifyH="LEFT">
                                    <Size x="0" y="20"/>
                                    <Anchors>
                                        <Anchor point="LEFT" x="20" y="0"/>
                                    </Anchors>
                                </FontString>
                                <FontString name="$parentTalentPointsText" parentKey="TalentPointsText"
                                            inherits="GameFontNormal" text="Unspent points: 12"
                                            justifyH="RIGHT">
                                    <Size x="0" y="20"/>
                                    <Anchors>
                                        <Anchor point="RIGHT" x="-20" y="0"/>
                                    </Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                    </Frame>


                    <!-- Container where youâ€™ll create talent buttons dynamically -->
                    <Frame name="ClasslessTalentTree" parentKey="TalentTree">
                        <Anchors>
                            <Anchor point="TOPLEFT"/>
                        </Anchors>
                        <Size x="500" y="450"/>
                        <Frames>
                            <Button name="ClasslessTalent1" parentKey="Talent1" inherits="ClasslessTalentButtonTemplate">
                                <Size x="32" y="32"/>
                                <Layers>
                                    <Layer level="ARTWORK">
                                        <FontString name="$parentSpentPointsText" parentKey="SpentPointsText"
                                                    inherits="GameFontNormal" text="Arcane Talents: 12" justifyH="LEFT">
                                            <Size x="0" y="20"/>
                                            <Anchors>
                                                <Anchor point="LEFT" x="20" y="0"/>
                                            </Anchors>
                                        </FontString>
                                        <FontString name="$parentTalentPointsText" parentKey="TalentPointsText"
                                                    inherits="GameFontNormal" text="Unspent points: 12"
                                                    justifyH="RIGHT">
                                            <Size x="0" y="20"/>
                                            <Anchors>
                                                <Anchor point="RIGHT" x="-20" y="0"/>
                                            </Anchors>
                                        </FontString>
                                    </Layer>
                                </Layers>
                            </Button>
                            <Button name="ClasslessTalent1" parentKey="Talent1" inherits="ClasslessTalentButtonTemplate">
                                <Size x="32" y="32"/>
                                <Anchors>
                                    <Anchor point="TOPLEFT" relativeTo="ClasslessTalentTree" relativePoint="TOPLEFT" x="0"
                                            y="0"/>
                                </Anchors>
                            </Button>
                        </Frames>
                    </Frame>
                </Frames>

                <Scripts>
                </Scripts>
            </Frame>

        </Frames>
    </Frame>


</Ui>